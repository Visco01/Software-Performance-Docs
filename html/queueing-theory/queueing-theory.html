<!doctype html>
<html lang="en">
<head>
<title>Queueing Theory</title>
<!-- 2024-03-22 Fri 10:56 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Org-mode">
<meta name="author" content="Pietro Visconti">

<link  href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<style>
/* org mode styles on top of twbs */

html {
    position: relative;
    min-height: 100%;
}

body {
    font-size: 18px;
    margin-bottom: 105px;
}

footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 101px;
    background-color: #f5f5f5;
}

footer > div {
    padding: 10px;
}

footer p {
    margin: 0 0 5px;
    text-align: center;
    font-size: 16px;
}

#table-of-contents {
    margin-top: 20px;
    margin-bottom: 20px;
}

blockquote p {
    font-size: 18px;
}

pre {
    font-size: 16px;
}

.footpara {
    display: inline-block;
}

figcaption {
  font-size: 16px;
  color: #666;
  font-style: italic;
  padding-bottom: 15px;
}

/* from twbs docs */

.bs-docs-sidebar.affix {
    position: static;
}
@media (min-width: 768px) {
    .bs-docs-sidebar {
        padding-left: 20px;
    }
}

/* All levels of nav */
.bs-docs-sidebar .nav > li > a {
    display: block;
    padding: 4px 20px;
    font-size: 14px;
    font-weight: 500;
    color: #999;
}
.bs-docs-sidebar .nav > li > a:hover,
.bs-docs-sidebar .nav > li > a:focus {
    padding-left: 19px;
    color: #A1283B;
    text-decoration: none;
    background-color: transparent;
    border-left: 1px solid #A1283B;
}
.bs-docs-sidebar .nav > .active > a,
.bs-docs-sidebar .nav > .active:hover > a,
.bs-docs-sidebar .nav > .active:focus > a {
    padding-left: 18px;
    font-weight: bold;
    color: #A1283B;
    background-color: transparent;
    border-left: 2px solid #A1283B;
}

/* Nav: second level (shown on .active) */
.bs-docs-sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 30px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav > li > a:focus {
    padding-left: 29px;
}
.bs-docs-sidebar .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav > .active:focus > a {
    padding-left: 28px;
    font-weight: 500;
}

/* Nav: third level (shown on .active) */
.bs-docs-sidebar .nav .nav .nav {
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 40px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav .nav > li > a:focus {
    padding-left: 39px;
}
.bs-docs-sidebar .nav .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav .nav > .active:focus > a {
    padding-left: 38px;
    font-weight: 500;
}

/* Show and affix the side nav when space allows it */
@media (min-width: 992px) {
    .bs-docs-sidebar .nav > .active > ul {
        display: block;
    }
    /* Widen the fixed sidebar */
    .bs-docs-sidebar.affix,
    .bs-docs-sidebar.affix-bottom {
        width: 213px;
    }
    .bs-docs-sidebar.affix {
        position: fixed; /* Undo the static from mobile first approach */
        top: 20px;
    }
    .bs-docs-sidebar.affix-bottom {
        position: absolute; /* Undo the static from mobile first approach */
    }
    .bs-docs-sidebar.affix .bs-docs-sidenav,.bs-docs-sidebar.affix-bottom .bs-docs-sidenav {
        margin-top: 0;
        margin-bottom: 0
    }
}
@media (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .bs-docs-sidebar.affix-bottom,
    .bs-docs-sidebar.affix {
        width: 263px;
    }
}
</style>
<script>
$(function() {
    'use strict';

    $('.bs-docs-sidebar li').first().addClass('active');

    $(document.body).scrollspy({target: '.bs-docs-sidebar'});

    $('.bs-docs-sidebar').affix();
});
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "center",
  displayIndent: "2em",
  messageStyle: "none",
  "HTML-CSS": {
    scale: 100,
    styles: {
      ".MathJax_Display": {
        "font-size": "100%"
      }
    }
  },
  "SVG": {
    scale: 100,
    styles: {
      ".MathJax_SVG_Display": {
        "font-size": "100%",
        "margin-left": "-2.281em"
      }
    }
  }
});
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"></script>
</head>
<body>
<div id="content" class="container">
<div class="row"><div class="col-md-3 col-md-push-9"><nav id="table-of-contents">
<div id="text-table-of-contents" class="bs-docs-sidebar">
<ul class="nav">
<li><a href="#sec-1">1. Terminologies</a></li>
<li><a href="#sec-2">2. Kendall notation</a></li>
<li><a href="#sec-3">3. M/M/1 queueing system</a>
<ul class="nav">
<li><a href="#sec-3-1">3.1. Load factor</a></li>
<li><a href="#sec-3-2">3.2. Expected number of customers</a></li>
<li><a href="#sec-3-3">3.3. Expected response time</a></li>
<li><a href="#sec-3-4">3.4. M/M/1 charts</a></li>
<li><a href="#sec-3-5">3.5. Other useful relations in M/M/1</a></li>
</ul>
</li>
<li><a href="#sec-4">4. M/M/m queueing system</a>
<ul class="nav">
<li><a href="#sec-4-1">4.1. Load factor</a></li>
<li><a href="#sec-4-2">4.2. Expected number of customers</a></li>
<li><a href="#sec-4-3">4.3. Expected response time</a></li>
<li><a href="#sec-4-4">4.4. M/M/m charts</a></li>
</ul>
</li>
</ul>
</div>
</nav>
</div><div class="col-md-9 col-md-pull-3"><h1 class="title">Queueing Theory</h1>
<p>
Queueing theory is the theory behind what happens when you have lots of jobs,
scarce resources, and subsequently long queues and delays. It is literally the
“theory of queues”: what makes queues appear and how to make them go away.
</p>

<p>
The goals of a queueing theorist are twofold. The first is predicting the
<b>system performance</b>. Although prediction is important, an even more important
goal is finding a superior <b>system design</b> to improve performance.
</p>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Terminologies</h2>
<div class="outline-text-2" id="text-1">
<blockquote>
<p>
<b>System capacity</b>: it represents the maximum number of jobs the system can
 contain (both waiting and serviced).
</p>
</blockquote>

<blockquote>
<p>
<b>Population size</b>: it represents the number of potential jobs that can access
 the system, i.e. they are willing to enter the system.
</p>
</blockquote>

<blockquote>
<p>
<b>Service discipline</b>: policy through which the jobs are served.
</p>
<ol class="org-ol">
<li><b>FCFS</b> (First Come First Serve);
</li>
<li><b>LCFS</b> (Last Come First Serve);
</li>
<li><b>FCFS/LCFS with preemption</b>: this feature allows to remove the job from the
service and putting it back to the queue;
</li>
<li><b>FCFS/LCFS with preemption and resume</b>: same as previous, but it resumes the
state of the job (it doesn&rsquo;t waste the work done);
</li>
<li><b>PS</b> (Processor Sharing): Simplified Round-Robin;
</li>
<li><b>IS</b> (Delay Center or Infinite Services);
</li>
<li><b>SRPT</b> (Shortest Remaining Processing Time).
</li>
</ol>
</blockquote>

<blockquote>
<p>
<b>Work-conserving discipline</b>: a queueing discipline is work-conserving if:
</p>
<ol class="org-ol">
<li>It never leaves idle a server that is allowed to work;
</li>
<li>It never wastes the work done on a job.
</li>
</ol>
</blockquote>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Kendall notation</h2>
<div class="outline-text-2" id="text-2">
<p>
It&rsquo;s a fast way to represent queueing systems.
</p>

<blockquote>
<p>
\(A/S/m/B/K/SD\)
</p>

<ul class="org-ul">
<li>\(A\): inter-arrival distribution
</li>
<li>\(S\): service distribution
</li>
<li>\(m\): number of servers
</li>
<li>\(B\): system capacity (default: \(\infty\))
</li>
<li>\(K\): population size (default: \(\infty\))
</li>
<li>\(SD\): service discipline (default: FCFS)
</li>
</ul>
</blockquote>

<p>
Abbreviations for \(A\) and \(M\):
</p>
<ul class="org-ul">
<li>\(M\): exponential (Poisson);
</li>
<li>\(D\): deterministic;
</li>
<li>\(G\): general distribution.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> M/M/1 queueing system</h2>
<div class="outline-text-2" id="text-3">
<p>
The M/M/1 open model begins with the following assumptions:
</p>
<ul class="org-ul">
<li>An average arrival rate \(\lambda\) is known;
</li>
<li>The system is running under an stable condition, i.e. \(\lambda < \mu\);
</li>
</ul>

<p>
<b>M/M/1</b> terminology indicates these features:
</p>
<ul class="org-ul">
<li>Exponential independent inter-arrival times (Poisson arrivals);
</li>
<li>Exponential independent service times;
</li>
<li>Single server, infinite buffer, FCFS discipline.
</li>
</ul>
</div>
<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Load factor</h3>
<div class="outline-text-3" id="text-3-1">
<p>
The load factor is defined as follows: \[\rho=\frac{\lambda}{\mu}\] and it
represents the ratio between the arrival rate and the service rate.
</p>

<p>
We already observed that the queue is stable, i.e. \(\rho < 1\).
</p>

<blockquote>
<p>
The steady-state probability of observing n jobs in the queue has a <b>geometric
distribution</b> with ratio \(\rho\).
</p>
</blockquote>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Expected number of customers</h3>
<div class="outline-text-3" id="text-3-2">
<p>
We have that \[\overline{N}=\frac{\rho}{1-\rho}\]
And the steady-state probability to find the server busy (i.e. number of customers in the service room) is \[U=\rho=E[N_{s}]\]
Recall that \(E[N]=E[N_{s}]+E[N_{q}]\), therefore \[E[N_{q}]=\frac{\rho}{1-\rho}-\rho=\frac{\rho^{2}}{1-\rho}\]
</p>
</div>
</div>
<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Expected response time</h3>
<div class="outline-text-3" id="text-3-3">
<p>
In stability conditions, we have \(X = \lambda\).
We can compute the expected response time by Little’s theorem: \[\overline{R}=E[R]=\frac{\overline{N}}{X}=\frac{1}{\mu-\lambda}\]
We know that \(E[S]=\mu^{-1}=\frac{1}{\mu}\), therefore \[E[W]=E[R]-E[S]=\frac{1}{\mu-\lambda}-\frac{1}{\mu}=\frac{\lambda}{\mu(\mu-\lambda)}\]
</p>
</div>
</div>
<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> M/M/1 charts</h3>
<div class="outline-text-3" id="text-3-4">

<figure>
<p><img src="../../resources/mm1-ncustomers.png" class="img-responsive" alt="mm1-ncustomers.png">
</p>
</figure>


<figure>
<p><img src="../../resources/mm1-response-time.png" class="img-responsive" alt="mm1-response-time.png">
</p>
<figcaption><span class="figure-number">Figure 2:</span> This chart can be subdivided in three parts: Low Load, Moderate Load, Heavy Load. The last one MUST be avoided due to the exponential response time based on little variations of &lambda;.</figcaption>
</figure>
</div>
</div>
<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> Other useful relations in M/M/1</h3>
<div class="outline-text-3" id="text-3-5">
<blockquote>
<p>
<b>Probability to find the empty queue</b>: \(1-\frac{\lambda}{\mu}=1-\rho\)
</p>
</blockquote>

<blockquote>
<p>
<b>Length of idle periods in the system</b>: exponentially distributed with mean
 \(\frac{1}{\lambda}\)
</p>
</blockquote>

<blockquote>
<p>
<b>Average length of busy periods</b>: \(X=\frac{1}{\mu-\lambda}\)
</p>
</blockquote>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> M/M/m queueing system</h2>
<div class="outline-text-2" id="text-4">
<p>
In today’s high-volume world, almost no websites, compute centers, or call
centers consist of just a single server. Instead a “server farm” is used. The
server farm is a collection of servers that work together to handle incoming
requests. Each request might be routed to a different server, so that servers
“share” the incoming load. From a practical perspective, server farms are often
preferable to a single “super-fast” server because of their low cost (many slow
servers are cheaper than a single fast one) and their flexibility (it is easy to
increase/decrease capacity as needed by adding/removing servers).
</p>

<p>
The first “M” indicates that we have <b>memoryless interarrival times</b>, and the
second “M” indicates <b>memoryless service times</b>. The third field denotes that <b>m
servers share a common pool</b> of arriving jobs. For the M/M/k system, there is no
capacity constraint
</p>


<figure>
<p><img src="../../resources/mmm-queue.png" class="img-responsive" alt="mmm-queue.png">
</p>
</figure>

<p>
Since the incoming stream is completely independent from the system, we denote \[\lambda(n)=\lambda\]
and the service rate is based on the number of \(n\) busy servers
</p>

<p>
\[\mu(n) =
\begin{cases}
  n\mu & \text{n <= m} \\
  m\mu & \text{otherwise}
\end{cases}\]
</p>
</div>
<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Load factor</h3>
<div class="outline-text-3" id="text-4-1">
<p>
In this type of queue system the load factor is defined as follows: \[\rho=\frac{\lambda}{m\mu}\]
Therefore, the system is stable if and only if \(\lambda < m\mu\)
</p>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Expected number of customers</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Let \(C(m,\frac{\lambda}{\mu})\) be the probability of finding all the servers busy.
</p>

<p>
Assuming stability we have that \(\lambda = X\) where \(X\) is the throughput, and the expected number of customers is derived as follows
</p>

<p>
\[\overline{N}=E[N]=\frac{\rho}{1-\rho}C(m,\frac{\lambda}{\mu})+\frac{\lambda}{\mu}\]
</p>
</div>
</div>
<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Expected response time</h3>
<div class="outline-text-3" id="text-4-3">
<p>
\(\overline{R}\) is derived by Little&rsquo;s theorem as follows \[\overline{R}=E[R]=\frac{C(m,\frac{\lambda}{\mu})}{m\mu-\lambda}+\frac{1}{\mu}\]
</p>
</div>
</div>
<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> M/M/m charts</h3>
<div class="outline-text-3" id="text-4-4">

<figure>
<p><img src="../../resources/mmm-ncustomers.png" class="img-responsive" alt="mmm-ncustomers.png">
</p>
</figure>


<figure>
<p><img src="../../resources/mmm-response-time.png" class="img-responsive" alt="mmm-response-time.png">
</p>
</figure>
</div>
</div>
</div>
</div></div></div>
<footer id="postamble" class="">
<div><p class="author">Author: Pietro Visconti</p>
<p class="date">Created: 2024-03-22 Fri 10:56</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 29.2 (<a href="http://orgmode.org">Org-mode</a> 9.7)</p>
</div>
</footer>
</body>
</html>
